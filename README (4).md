# конфигурационное управление  
# конфигурационное управление  
## этап 1. парсер и промежуточное представление  
## описание проекта
На этапе 1 выполняется разбор текстового ассемблерного файла и преобразование команд в промежуточное представление (IR).
Ассемблер поддерживает четыре инструкции УВМ:

Загрузка константы `load_const`
Чтение из памяти`read_mem`
Запись в память`write_mem`
Унарная операция bswap `bswap`          |

## возможности
- разбор человекочитаемого ассемблерного языка вида:
  ```
  load_const(481)
  read_mem(634)
  write_mem(570)
  bswap(632)
  ```
- генерация промежуточного представления IR
- вывод IR в читаемом виде
- генерация тестовых байтов команд
- режим тестирования через `--test`

## структура проекта
|
│ main.py
│ program.asm
│ README.md

## запуск
```
python stage1.py program.asm program.ir
```
### режим тестирования
запуск:
```bash
python stage1.py program.asm out.bin --test
```
пример вывода:
```
строка  1: load_const(481)
  mnemonic: load_const
  A = 121
  B = 481
  size = 2 байт
  байты: 0xF9, 0xF0

строка  2: read_mem(634)
  mnemonic: read_mem
  A = 52
  B = 634
  size = 3 байт
  байты: 0x34, 0x3D, 0x01

строка  3: write_mem(570)
  mnemonic: write_mem
  A = 18
  B = 570
  size = 5 байт
  байты: 0x12, 0x1D, 0x01, 0x00, 0x00

строка  4: bswap(632)
  mnemonic: bswap
  A = 15
  B = 632
  size = 5 байт
  байты: 0x0F, 0x3C, 0x01, 0x00, 0x00
```

## этап 2. генерация машинного кода  
## описание проекта
На этапе 2 выполняется трансляция промежуточного представления (IR) ассемблерных команд в машинный код УВМ.
Ассемблер поддерживает те же четыре инструкции:

Загрузка константы: load_const
Чтение из памяти: read_mem
Запись в память: write_mem
Унарная операция: bswap

Этап 2 формирует бинарный файл .bin, готовый для исполнения на УВМ, с проверкой корректности аргументов и раскладки байт.

## возможности
- Генерация машинного кода из исходного ASM-файла
- Поддержка всех инструкций УВМ
- Проверка, что аргументы команд помещаются в допустимое количество бит (B_bits)
- Запись результата в бинарный файл
- Режим тестирования с выводом закодированных байт в hex
- Автоматическое определение размера бинарного файла

## структура проекта
|
│ stage2.py
| stage1.py
│ program.asm
| program.ir (!)
│ README.md
| out.bin (!)

## запуск
```bash
python stage2.py program.asm out.bin
```
### режим тестирования
запуск:
```bash
python stage2.py program.asm out.bin --test
```
пример вывода:
бинарный файл записан: out.bin
размер: 15 байт

вывод теста:
